### 概述

学习大纲:

- 参数传递的方式
- 函数方法返回的方式
- 模板函数
- 递归函数
- 常量函数
- 内存分配与释放
- 异常处理结构
- 类与模板类
- 类的公共成员,保护成员,私有成员
- 友元
- 操作符重载
- 标准模板库

经典代码:

- 动态分配与释放一维和二维i而数组
- 求解二元方程组
- 生成n个元素的所有排列方式
- 寻找n个元素的最大值

### 引言

检查一个程序的八个大问:

- 正确?
- 易读?
- 完善的文档?
- 易修改?
- 运行需求多大的内存?
- 运行时间有多长?
- 可否解决更大范围的数据?
- 可否在多种机器编译运行?

### 函数与参数

#### 参数类型

| 特性                 | 传值参数 (`int a`)                 | 引用参数 (`int& a`)                    | 常量引用参数 (`const int& a`)           |
| -------------------- | ---------------------------------- | -------------------------------------- | --------------------------------------- |
| **传递方式**         | 传递值的副本                       | 传递变量的引用（别名）                 | 传递变量的常量引用（只读别名）          |
| **是否修改原值**     | 不能修改原值                       | 可以修改原值                           | 不能修改原值                            |
| **内存开销**         | 有额外开销（需要复制数据）         | 无额外开销（直接操作原变量）           | 无额外开销（直接操作原变量）            |
| **适用场景**         | 适用于小型数据（如基本类型）       | 适用于需要修改原值或传递大型数据的场景 | 适用于只读访问大型数据，避免复制开销    |
| **性能**             | 对于大型数据性能较差（复制开销大） | 高性能（无复制开销）                   | 高性能（无复制开销）                    |
| **安全性**           | 安全（不会意外修改原值）           | 不安全（可能意外修改原值）             | 安全（不能修改原值）                    |
| **示例**             | `void func(int a) { a = 10; }`     | `void func(int& a) { a = 10; }`        | `void func(const int& a) {  a = 10;  }` |
| **调用方式**         | `func(x);` （传递值的副本）        | `func(x);` （传递变量的引用）          | `func(x);` （传递变量的常量引用）       |
| **是否支持临时变量** | 支持                               | 不支持                                 | 支持                                    |

#### 返回值类型

| 返回值类型   | 语法示例      | 特点                                         | 适用场景                               |
| :----------- | :------------ | :------------------------------------------- | :------------------------------------- |
| **值类型**   | `int func()`  | 返回值的副本。适用于小型数据（如基本类型）。 | 返回计算结果，且不需要修改原值。       |
| **指针类型** | `int* func()` | 返回指针。可以通过指针修改指向的值。         | 需要返回动态分配的内存或数组的指针。   |
| **引用类型** | `int& func()` | 返回变量的引用（别名）。可以直接修改原值。   | 需要返回某个变量的引用，以便后续修改。 |

#### 模板函数

模板函数是 C++ 中用于实现**泛型编程**的工具。它允许你编写一个通用的函数，可以处理多种数据类型，而不需要为每种类型单独重写函数。

##### 特点
1. **通用性**：可以处理任意类型的数据（如 `int`、`double`、`string` 等）。
2. **类型安全**：在编译时进行类型检查，避免运行时错误。
3. **代码复用**：减少重复代码，提高开发效率。

##### 语法
```cpp
template <typename T>
T func(T a, T b) {
    // 函数体
}
```
- `template <typename T>`：声明一个模板，`T` 是占位符类型。
- `T func(T a, T b)`：定义一个模板函数，`T` 可以是任意类型。

##### 示例
```cpp
template <typename T>
T add(T a, T b) {
    return a + b;
}

int main() {
    cout << add(3, 4) << endl;       // 输出 7 (int 类型)
    cout << add(3.5, 4.2) << endl;   // 输出 7.7 (double 类型)
    return 0;
}
```

#### 重载函数

重载函数是指在同一个作用域内，定义多个**同名函数**，但这些函数的**参数列表（签名）不同**。C++ 编译器会根据调用时传递的参数类型和数量，自动选择匹配的函数。

##### 函数签名 (Function Signature)
函数签名是函数的**唯一标识**，由以下部分组成：
1. **函数名**：函数的名称。
2. **参数列表**：参数的类型、数量和顺序。
3. **const 限定符**（如果适用）：成员函数是否被声明为 `const`。

**注意**：返回值类型**不属于**函数签名的一部分。

##### 示例

###### 1. 参数数量不同
```cpp
void print(int a) {
    cout << "Printing int: " << a << endl;
}

void print(int a, int b) {
    cout << "Printing two ints: " << a << ", " << b << endl;
}

int main() {
    print(10);         // 调用 print(int a)
    print(10, 20);     // 调用 print(int a, int b)
    return 0;
}
```

###### 2. 参数类型不同
```cpp
void print(int a) {
    cout << "Printing int: " << a << endl;
}

void print(double a) {
    cout << "Printing double: " << a << endl;
}

int main() {
    print(10);         // 调用 print(int a)
    print(3.14);       // 调用 print(double a)
    return 0;
}
```

###### 3. 参数顺序不同
```cpp
void print(int a, double b) {
    cout << "Printing int and double: " << a << ", " << b << endl;
}

void print(double a, int b) {
    cout << "Printing double and int: " << a << ", " << b << endl;
}

int main() {
    print(10, 3.14);   // 调用 print(int a, double b)
    print(3.14, 10);   // 调用 print(double a, int b)
    return 0;
}
```

##### 注意事项
1. **返回值类型不能用于重载**：
   
   ```cpp
   int func(int a) { return a; }
   double func(int a) { return a; } // 错误：仅返回值类型不同，不能重载
   ```
   
2. **默认参数可能导致重载冲突**：
   
   ```cpp
   void print(int a) { cout << a << endl; }
   void print(int a, int b = 10) { cout << a << ", " << b << endl; }
   
   print(5); // 错误：调用不明确，可能匹配两个函数
   ```
   
3. **const 成员函数可以重载**：
   ```cpp
   class MyClass {
   public:
       void func() { cout << "Non-const func" << endl; }
       void func() const { cout << "Const func" << endl; }
   };
   
   MyClass obj;
   const MyClass constObj;
   obj.func();      // 调用非 const 版本
   constObj.func(); // 调用 const 版本
   ```

### 异常

